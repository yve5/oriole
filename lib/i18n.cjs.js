"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const O=require("date-fns/locale"),p=require("date-fns"),g=require("react"),y=require("react-redux");function D(t){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const e in t)if(e!=="default"){const o=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,o.get?o:{enumerable:!0,get:()=>t[e]})}}return n.default=t,Object.freeze(n)}const S=D(O),m={LANG:"en",LANGUAGE:"English",DATE_FORMAT:"MM/dd/yyyy",LOCALE:"enUS","$number items per page":"$number items per page","$total records":"$total records",Add:"Add","Ascending order":"Ascending order",Back:"Back","Changes have been saved.":"Changes have been saved.","Choose a file":"Choose a file",Columns:"Columns","Creation date":"Creation date","Descending order":"Descending order",Disabled:"Disabled",Enabled:"Enabled",First:"First","Hello World":"Hello World","Hide columns":"Hide columns",Last:"Last","Loading...":"Loading...",Members:"Members",Next:"Next",No:"No","No record":"No record","One record":"One record",Previous:"Previous",Reset:"Reset","This field is invalid.":"This field is invalid.",Title:"Title","to fill":"to fill","Update of $update, created at $start by $guest":"Update of $update, created at $start by $guest",Yes:"Yes"},b={LANG:"fr",LANGUAGE:"Français",DATE_FORMAT:"dd/MM/yyyy",LOCALE:"fr","$number items per page":"$number éléments par page","$total records":"$total enregistrements",Add:"Ajouter","Ascending order":"Ordre croissant",Back:"Retour","Changes have been saved.":"Les changements ont été sauvegardés.","Choose a file":"Choisir un fichier",Columns:"Colonnes","Creation date":"Date de création","Descending order":"Ordre décroissant",Disabled:"Désactivé",Enabled:"Activé",First:"Premier","Hello World":"Bonjour le monde","Hide columns":"Cacher les colonnes",Last:"Dernier","Loading...":"Chargement...",Members:"Membres",Next:"Suivant",No:"Non","No record":"Aucun enregistrement","One record":"Un enregistrement",Previous:"Précédent",Reset:"Réinitialiser","This field is invalid.":"Ce champ est invalide.",Title:"Titre","to fill":"à remplir","Update of $update, created at $start by $guest":"Mise à jour le $update, créé le $start par $guest",Yes:"Oui"},I=(t,n="P",e="enUS")=>{const o=S[e];let r="-";if(t instanceof Date)n==="fromNow"?r=p.formatDistance(t,new Date,{addSuffix:!0,locale:o}):r=p.format(t,n,{locale:o});else if(typeof t=="string"){const s=p.parseISO(t,"y-MM-dd",new Date);s instanceof Date&&!isNaN(s)&&(n==="fromNow"?r=p.formatDistance(s,new Date,{addSuffix:!0,locale:o}):r=p.format(s,n,{locale:o}))}return r},N=(t,n,e={},o=!1)=>{let r;if(typeof n=="string"){const s=t[n];let u=!1;if(typeof e=="object"&&e!==null&&Object.keys(e).forEach(a=>{n===a&&(u=!0)}),u)r=n;else if(s)r=s;else{const a=`Not translated input: ${n}`;if(r=n,process.env.NODE_ENV!=="test"||o)console.warn(a);else throw new Error(a)}typeof e=="object"&&e!==null&&Object.keys(e).forEach(a=>{const i=e[a];if(typeof i=="object"&&i!==null&&"date"in i){const{date:c,format:f}=i;r=r.split(a).join(I(c,f,t.LOCALE))}else r=r.split(a).join(i)})}return r},_="I18N_INIT_LANG",h="I18N_CHANGE_LANG",C="I18N_SWITCH_LANG",E="I18N_LOCAL_USER_LANG",G={tsl:(t,n)=>N(m,t,n),dictionaries:[m,b],lang:m.LANG},T=(...t)=>{let n={...G};return t&&t[0]&&(n={...n,dictionaries:t,lang:t[0].LANG,tsl:(e,o)=>N(t[0],e,o)}),(e=n,o={})=>{switch(o.type){case _:case h:{const r=e.dictionaries.findIndex(({LANG:s})=>s===o.lang);return{...e,...o,tsl:(s,u)=>N(e.dictionaries[r],s,u)}}case C:{const s=(e.dictionaries.findIndex(({LANG:i})=>i===e.lang)+1)%e.dictionaries.length,a=e.dictionaries[s].LANG;return localStorage.setItem(E,a),{...e,...o,lang:a,tsl:(i,c)=>N(e.dictionaries[s],i,c)}}default:return e}}},$=(t=[m,b])=>({tsl:(n,e)=>N(t[0],n,e),lang:t[0].LANG,dictionaries:t}),v=({args:t,attrs:n,children:e,date:o,format:r,placeholder:s,root:{i18n:{lang:u,tsl:a}},title:i})=>{let c="-";if(typeof o<"u")c=I(o,r,a("LOCALE"));else if(e&&u){const f=t||{};if(Object.keys(f).forEach(l=>{const d=f[l];typeof d=="object"&&d!==null&&"date"in d&&(d.lang=u)}),typeof e=="string")c=a(e,f);else{if(typeof e.length<"u")throw new Error("I18n can not translate several html tags in a row");if(e.type==="option"){const{value:l,children:d}=e.props;c=g.createElement("option",{value:l},a(d,f))}else{const l=n||[];if(i&&l.push("title"),s&&l.push("placeholder"),!Array.isArray(l)||Array.isArray(l)&&!l.length)throw new Error("I18n attributes are missing");const d={};l.forEach(A=>{typeof e.props[A]<"u"&&(d[A]=a(e.props[A],f))}),c=g.createElement(e.type,{...e.props,...d})}}}return c},j=t=>({root:t}),L=y.connect(j)(v),w=(t=localStorage.getItem(E))=>({type:_,lang:t||b.LANG}),M=t=>({type:h,lang:t}),R=()=>({type:C}),P=Object.freeze(Object.defineProperty({__proto__:null,changeLang:M,initLang:w,switchLang:R},Symbol.toStringTag,{value:"Module"})),x=({className:t,switchLang:n})=>g.createElement(L,{title:!0},g.createElement("button",{type:"button",title:"LANGUAGE",className:t,onClick:()=>n(),"data-testid":"i18n-switch-button"},g.createElement(L,null,"LANG"))),U=t=>({root:t}),H={...P};y.connect(U,H)(x);exports.I18n=L;exports.default=T;exports.getInitialState=$;
