"use strict";const p=require("react"),b=require("react-redux"),D=require("date-fns/locale"),A=require("date-fns");function T(t){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:()=>t[r]})}}return n.default=t,Object.freeze(n)}const O=T(D),m={LANG:"fr",LANGUAGE:"Français",DATE_FORMAT:"dd/MM/yyyy",LOCALE:"fr","$number items per page":"$number éléments par page","$total records":"$total enregistrements",Add:"Ajouter","Ascending order":"Ordre croissant",Back:"Retour","Changes have been saved.":"Les changements ont été sauvegardés.","Choose a file":"Choisir un fichier",Columns:"Colonnes","Creation date":"Date de création","Descending order":"Ordre décroissant",Disabled:"Désactivé",Enabled:"Activé",First:"Premier","Hello World":"Bonjour le monde","Hide columns":"Cacher les colonnes",Last:"Dernier","Loading...":"Chargement...",Members:"Membres",Next:"Suivant",No:"Non","No record":"Aucun enregistrement","One record":"Un enregistrement",Previous:"Précédent",Reset:"Réinitialiser","This field is invalid.":"Ce champ est invalide.",Title:"Titre","to fill":"à remplir","Update of $update, created at $start by $guest":"Mise à jour le $update, créé le $start par $guest",Yes:"Oui"},S="I18N_INIT_LANG",E="I18N_CHANGE_LANG",h="I18N_SWITCH_LANG",_="I18N_LOCAL_USER_LANG",G=["LANG","LANGUAGE","DATE_FORMAT","LOCALE"],$=(t=localStorage.getItem(_))=>({type:S,lang:t||m.LANG}),R=t=>({type:E,lang:t}),v=()=>({type:h}),C=Object.freeze(Object.defineProperty({__proto__:null,changeLang:R,initLang:$,switchLang:v},Symbol.toStringTag,{value:"Module"})),w=({className:t="form-select",root:{i18n:{dictionaries:n}},changeLang:r})=>p.createElement("select",{className:t,"data-testid":"i18n-lang-select",onChange:({target:{value:o}})=>r(o)},n.map(({LANG:o,LANGUAGE:s})=>p.createElement("option",{key:o,value:o},s))),M=t=>({root:t}),j={...C},P=b.connect(M,j)(w),I=(t,n="P",r="enUS")=>{const o=O[r];let s="-";if(t instanceof Date)n==="fromNow"?s=A.formatDistance(t,new Date,{addSuffix:!0,locale:o}):s=A.format(t,n,{locale:o});else if(typeof t=="string"){const e=A.parseISO(t,"y-MM-dd",new Date);e instanceof Date&&!isNaN(e)&&(n==="fromNow"?s=A.formatDistance(e,new Date,{addSuffix:!0,locale:o}):s=A.format(e,n,{locale:o}))}return s},g={LANG:"en",LANGUAGE:"English",DATE_FORMAT:"MM/dd/yyyy",LOCALE:"enUS","$number items per page":"$number items per page","$total records":"$total records",Add:"Add","Ascending order":"Ascending order",Back:"Back","Changes have been saved.":"Changes have been saved.","Choose a file":"Choose a file",Columns:"Columns","Creation date":"Creation date","Descending order":"Descending order",Disabled:"Disabled",Enabled:"Enabled",First:"First","Hello World":"Hello World","Hide columns":"Hide columns",Last:"Last","Loading...":"Loading...",Members:"Members",Next:"Next",No:"No","No record":"No record","One record":"One record",Previous:"Previous",Reset:"Reset","This field is invalid.":"This field is invalid.",Title:"Title","to fill":"to fill","Update of $update, created at $start by $guest":"Update of $update, created at $start by $guest",Yes:"Yes"},x=({args:t,date:n,attrs:r,title:o,format:s,children:e,placeholder:a,root:{i18n:{lang:i,tsl:c}}})=>{let f="-";if(typeof n<"u")f=I(n,s,c("LOCALE"));else if(e&&i){const u=t||{};if(Object.keys(u).forEach(l=>{const d=u[l];typeof d=="object"&&d!==null&&"date"in d&&(d.lang=i)}),typeof e=="string")f=c(e,u);else{if(typeof e.length<"u")throw new Error("I18n can not translate several html tags in a row");if(e.type==="option"){const{value:l,children:d}=e.props;f=p.createElement("option",{value:l},c(d,u))}else{const l=r||[];if(o&&l.push("title"),a&&l.push("placeholder"),!Array.isArray(l)||Array.isArray(l)&&!l.length)throw new Error("I18n attributes are missing");const d={};l.forEach(L=>{typeof e.props[L]<"u"&&(d[L]=c(e.props[L],u))}),f=p.createElement(e.type,{...e.props,...d})}}}return f},U=t=>({root:t}),y=b.connect(U)(x),F=({className:t,switchLang:n})=>p.createElement(y,{title:!0},p.createElement("button",{type:"button",title:"LANGUAGE",className:t,onClick:()=>n()},p.createElement(y,null,"LANG"))),H=t=>({root:t}),k={...C},Y=b.connect(H,k)(F),N=(t,n,r={},o=!1)=>{let s;if(typeof n=="string"){const e=t[n];let a=!1;if(typeof r=="object"&&r!==null&&Object.keys(r).forEach(i=>{n===i&&(a=!0)}),a)s=n;else if(e)s=e;else{const i=`Not translated input: ${n}`;if(s=n,process.env.NODE_ENV!=="test"||o)console.warn(i);else throw new Error(i)}typeof r=="object"&&r!==null&&Object.keys(r).forEach(i=>{const c=r[i];if(typeof c=="object"&&c!==null&&"date"in c){const{date:f,format:u}=c;s=s.split(i).join(I(f,u,t.LOCALE))}else s=s.split(i).join(c)})}return s},W={tsl:(t,n)=>N(g,t,n),dictionaries:[g,m],lang:g.LANG},q=(t,n=_)=>{const r=(e,a)=>{const i=e.findIndex(({LANG:c})=>c===a);return i===-1?0:i};let o={...W};if(Array.isArray(t)&&t[0]){const e=[];t.forEach(a=>{a.LANG===g.LANG?e.push({...g,...a}):a.LANG===m.LANG?e.push({...m,...a}):e.push(a)}),o={...o,dictionaries:e,tsl:(a,i)=>N(e[0],a,i)}}const s=localStorage.getItem(n);if(s){const e=o.dictionaries,a=r(e,s);o={...o,lang:s,tsl:(i,c)=>N(e[a],i,c)}}return(e=o,a={})=>{switch(a.type){case E:{const i=r(e.dictionaries,a.lang);return{...e,...a,tsl:(c,f)=>N(e.dictionaries[i],c,f)}}case h:{const c=(r(e.dictionaries,e.lang)+1)%e.dictionaries.length,u=e.dictionaries[c].LANG;return localStorage.setItem(n,u),{...e,...a,lang:u,tsl:(l,d)=>N(e.dictionaries[c],l,d)}}default:return e}}};exports.I18N_DICTIONARY=g;exports.I18N_FIRST_TERMS=G;exports.I18n=y;exports.LangSelect=P;exports.LangSwitch=Y;exports.formatDate=I;exports.reducer=q;
